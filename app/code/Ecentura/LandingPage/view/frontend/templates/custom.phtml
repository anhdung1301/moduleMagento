<?php
/**
 * Product list template
 *
 * @var $block Ecentura\LandingPage\Block\Landing\Custom;
 */

use Magento\Catalog\Block\Product\ReviewRendererInterface;
use Magento\Framework\App\Action\Action;

$_helper = $block->getHelper();
$pos = $block->getPositioned();
$imageDisplayArea = 'category_page_list';
$templateType = ReviewRendererInterface::FULL_VIEW;
$viewMode = 'grid';
$showDescription = true;
$url_base = "12";
$n = 1;
$list_product = $block->getProductTab();
?>


<div class="container">
    <div class="container related">
        <div class="col-xs-12">
            <div class="title">Onze top 10 producten</div>
        </div>
        <input type="text" id="top_offset" class="hidden" value="1">
        <div class="product data items"
             data-mage-init='{"mage/tabs": {"openedState": "active", "animate": {"duration": 100}, "active": 0,"disabledState": "disabled"}}'>
            <div class="heading-tabs">
                <div class="item title" data-role="collapsible">
                    <a class="switch" data-toggle="trigger" href="#tab-1"><?= $block->getTitleTab('title_tab1') ?></a>
                </div>
                <div class="item title" data-role="collapsible">
                    <a class="switch" data-toggle="trigger" href="#tab-2"><?= $block->getTitleTab('title_tab2') ?></a>
                </div>
                <div class="item title" data-role="collapsible">
                    <a class="switch" data-toggle="trigger" href="#tab-3"><?= $block->getTitleTab('title_tab3') ?></a>
                </div>
                <div class="item title" data-role="collapsible">
                    <a class="switch" data-toggle="trigger" href="#tab-4"><?= $block->getTitleTab('title_tab4') ?></a>
                </div>
            </div>

            <?php foreach ($list_product as $key => $value) : ?>
                <div class="list-product">
                    <div id="<?= $key ?>" class="item content" data-role="content">
                        <?php $_productCollection = $value ?>
                        <?php if (!$_productCollection->count()) : ?>
                            <div class="message info empty">
                                <div><?= $block->escapeHtml(__('We can\'t find products matching the selection.')) ?></div>
                            </div>
                        <?php else : ?>
                            <div class="hbr-main pad-main">
                                <div class="block-title-main">
                                    <div class="title-border"></div>
                                </div>
                                <div class="hbr-main">
                                    <div class="hbr-content hbr-slider owl-carousel ">
                                        <?php foreach ($_productCollection as $_product) : ?>

                                            <div class="hbr-inner">
                                                <div class=" hbr-inner item product product-item mp-blog-slider-item">
                                                    <div class="product-item-info" style="margin-left: 15px"
                                                         data-container="product-<?= /* @noEscape */
                                                         $viewMode ?>">
                                                        <?php if ($n == 11) $n = 1 ?>
                                                        <span class="round-number"><?= $n++ ?></span>
                                                        <?php
                                                        $productImage = $block->getImage($_product, $imageDisplayArea);
                                                        if ($pos != null) {
                                                            $position = ' style="left:' . $productImage->getWidth() . 'px;'
                                                                . 'top:' . $productImage->getHeight() . 'px;"';
                                                        }
                                                        ?>
                                                        <?php // Product Image?>
                                                        <a href="<?= $block->escapeUrl($_product->getProductUrl()) ?>"
                                                           class="product photo product-item-photo"
                                                           tabindex="-1">
                                                            <?= $productImage->toHtml() ?>
                                                        </a>

                                                        <div class="product details product-item-details">
                                                            <?php
                                                            $_productNameStripped = $block->stripTags($_product->getName(), null, true);
                                                            ?>
                                                            <strong class="product name product-item-name">
                                                                <a class="product-item-link"
                                                                   href="<?= $block->escapeUrl($_product->getProductUrl()) ?>">
                                                                    <?= /* @noEscape */
                                                                    $_helper->productAttribute($_product, $_product->getName(), 'name') ?>
                                                                </a>
                                                            </strong>
                                                            <?= /* @noEscape */
                                                            $block->getProductPrice($_product) ?>
                                                            <?= $block->getProductDetailsHtml($_product) ?>
                                                            <!---->
                                                            <div class="product-item-inner">
                                                                <div
                                                                    class="product actions product-item-actions"<?= strpos($pos, $viewMode . '-actions') ? $block->escapeHtmlAttr($position) : '' ?>>
                                                                    <div
                                                                        class="actions-primary"<?= strpos($pos, $viewMode . '-primary') ? $block->escapeHtmlAttr($position) : '' ?>>
                                                                        <?php if ($_product->isSaleable()) : ?>
                                                                            <?php $postParams = $block->getAddToCartPostParams($_product); ?>
                                                                            <form data-role="tocart-form"
                                                                                  data-product-sku="<?= $block->escapeHtml($_product->getSku()) ?>"
                                                                                  action="<?= $block->escapeUrl($postParams['action']) ?>"
                                                                                  method="post">
                                                                                <input type="hidden"
                                                                                       name="product"
                                                                                       value="<?= /* @noEscape */
                                                                                       $postParams['data']['product'] ?>">
                                                                                <input type="hidden"
                                                                                       name="<?= /* @noEscape */
                                                                                       Action::PARAM_NAME_URL_ENCODED ?>"
                                                                                       value="<?= /* @noEscape */
                                                                                       $postParams['data'][Action::PARAM_NAME_URL_ENCODED] ?>">
                                                                                <?= $block->getBlockHtml('formkey') ?>
                                                                                <button type="submit"
                                                                                        title="<?= $block->escapeHtmlAttr(__('Add to Cart')) ?>"
                                                                                        class="action tocart primary">
                                                                                    <span><?= $block->escapeHtml(__('Add to Cart')) ?></span>
                                                                                </button>
                                                                            </form>
                                                                        <?php else : ?>
                                                                            <?php if ($_product->isAvailable()) : ?>
                                                                                <div class="stock available">
                                                                                    <span><?= $block->escapeHtml(__('In stock')) ?></span>
                                                                                </div>
                                                                            <?php else : ?>
                                                                                <div class="stock unavailable">
                                                                                    <span><?= $block->escapeHtml(__('Out of stock')) ?></span>
                                                                                </div>
                                                                            <?php endif; ?>
                                                                        <?php endif; ?>
                                                                    </div>
                                                                    <div data-role="add-to-links"
                                                                         class="actions-secondary"<?= strpos($pos, $viewMode . '-secondary') ? $block->escapeHtmlAttr($position) : '' ?>>
                                                                        <?php if ($addToBlock = $block->getChildBlock('addto')) : ?>
                                                                            <?= $addToBlock->setProduct($_product)->getChildHtml() ?>
                                                                        <?php endif; ?>
                                                                    </div>
                                                                </div>
                                                                <?php if ($showDescription) : ?>
                                                                    <div
                                                                        class="product description product-item-description">
                                                                        <?= /* @noEscape */
                                                                        $_helper->productAttribute($_product, $_product->getShortDescription(), 'short_description') ?>
                                                                        <a href="<?= $block->escapeUrl($_product->getProductUrl()) ?>"
                                                                           title="<?= /* @noEscape */
                                                                           $_productNameStripped ?>"
                                                                           class="action more"><?= $block->escapeHtml(__('Learn More')) ?></a>
                                                                    </div>
                                                                <?php endif; ?>

                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>

                                        <?php endforeach; ?>
                                        <?php $n = 1; ?>
                                    </div>
                                </div>
                            </div>
                        <?php endif; ?></div>
                </div>

            <?php endforeach; ?>
        </div>
    </div>
    <?php foreach ($block->list() as $key => $value): ?>
        <div class="ad_related_pro_below">
            <div class="col-xs-12">
                <div class="title"><?= $block->getInforCat($key) ?></div>
            </div>
            <div class="raleted_pro_general_below">
                <div class="row">
                    <div class="theme-cat-group">
                        <?php if ($block->getListCat($block->getInforCat($value)) && $block->getListCat($block->getInforCat($value))) : ?>
                            <?php foreach ($block->getListCat($block->getInforCat($value)) as $item): ?>
                                <?php foreach ($item as $cat): ?>
                                    <div class="col-sm-3">
                                        <div class="raleted_pro_detailds">
                                            <a href="<?= $cat['url'] ?>"
                                               title="<?= $cat['name'] ?>" class="panel-body">
                                                <div class="cat-img">
                                                    <?php if ($cat['image']) : ?>
                                                        <img
                                                            src="<?= $block->getUrl() . 'pub/media/catalog/category/' . $cat['image'] ?>"
                                                            alt="<?= $cat['name'] ?>" width="117" height="90">
                                                    <?php endif; ?>
                                                </div>
                                                <div class="sub-info">
                                                    <div class="align-middle">
                                                        <span class="name"><?= $cat['name'] ?></span>
                                                        <span class="sub-caption">
                                        <ul>
                                           <li><?= $cat['count_product']; ?> artikelen</li>
                                        </ul>
                                     </span>
                                                    </div>
                                                </div>
                                                <i class="fa fa-angle-rights" aria-hidden="true"></i>
                                            </a>
                                        </div>
                                    </div>
                                <?php endforeach; ?>
                            <?php endforeach; ?>
                        <?php else : ?>
                            <div class="message info empty">
                                <div><?= $block->escapeHtml(__('No find  matching the selection.')) ?></div>
                            </div>
                        <?php endif; ?>
                    </div>
                </div>
            </div>
        </div>
    <?php endforeach; ?>
</div>
<script type="text/javascript" xml="space">// <![CDATA[
    require(['jquery', 'cpowlcarousel'], function ($) {
        jQuery(document).ready(function () {
            jQuery(".hbr-main .hbr-slider ").owlCarousel({
                items: 4,
                itemsDesktop: [1080, 4],
                itemsDesktopSmall: [860, 3],
                itemsTablet: [768, 3],
                itemsTabletSmall: [639, 3],
                itemsMobile: [479, 2],
                pagination: false,
                navigationText: ['<div class="lft-btn"><i class="fa fa-angle-left"></i></div>', '<div class="rgt-btn"><i class="fa fa-angle-right"></div>'],
                navigation: true,
            });
        });
        $(".view-hometext-mobile").click(function () {
            $(".view-hometext-mobile").hide();
            $(".content-below").show();
        });

    });

</script>
